{
  "name": "Haskell Webapp",
  "image": "ghcr.io/junghunleephd/hs-template-env:latest",
  "remoteUser": "vscode",

  "mounts": ["source=stack-root,target=/home/vscode/.stack,type=volume"],

  "customizations": {
    "vscode": {
      "extensions": [
        "haskell.haskell",
        "justusadam.language-haskell",
        "esbenp.prettier-vscode"
      ],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "zsh",
        "haskell.manageHLS": "GHCup",
        "haskell.ghcupExecutablePath": "/home/vscode/.ghcup/bin/ghcup",
        "editor.formatOnSave": true,

        // --- Haskell ---
        "[haskell]": {
          "editor.defaultFormatter": "haskell.haskell"
        },
        "haskell.formattingProvider": "ormolu",

        // --- Configuration Files ---
        "[yaml]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },
        "[json]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },
        "[jsonc]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },

        // --- NEW: Web Frontend Files ---
        "[html]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },
        "[css]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        },
        "[javascript]": {
          "editor.defaultFormatter": "esbenp.prettier-vscode"
        }
      }
    }
  },

  "forwardPorts": [3000],

  "remoteEnv": {
    "PATH": "/home/vscode/.ghcup/bin:${containerEnv:PATH}"
  },

  "postCreateCommand": "stack setup --system-ghc && stack build --only-dependencies --system-ghc"
}
